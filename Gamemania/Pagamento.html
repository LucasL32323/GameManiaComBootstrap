<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pagamento - GameMania</title>
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <script>
    const usuarioLogado = localStorage.getItem("usuarioLogado");
    if (!usuarioLogado) {
      window.location.href = "entreoucadastrese.html";
    }
  </script>
</head>
<body>

  <header class="bg-dark text-white py-3">
    <div class="container d-flex align-items-center gap-3">
      <img src="imgs/Logo4.png" alt="Logo GameMania" height="50">
      <h1 class="h3 m-0">GameMania</h1>
      <img src="imgs/Logo3.png" alt="Logo GameMania2" height="50">
    </div>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark mt-3">
      <div class="container d-flex justify-content-start">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menuPrincipal">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="menuPrincipal">
          <ul class="navbar-nav mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link" href="pcgamer.html">PC Gamer</a></li>
            <li class="nav-item"><a class="nav-link" href="hardware.html">Hardware</a></li>
            <li class="nav-item"><a class="nav-link" href="computadores.html">Computadores</a></li>
            <li class="nav-item"><a class="nav-link" href="perifericos.html">Periféricos</a></li>
            <li class="nav-item"><a class="nav-link" href="escritorio.html">Escritório</a></li>
            <li class="nav-item"><a class="nav-link" href="entreoucadastrese.html">Entre ou cadastre-se</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <main class="container my-5">
    <h2 class="mb-4 text-center">Finalizar Pagamento</h2>

    <div class="row g-5">
      <div class="col-md-5 text-center">
        <img id="imagemProduto" src="" alt="" class="img-fluid" style="max-width: 400px;">
        <p class="mt-3 text-muted" id="nomeProduto"></p>
      </div>

      <div class="col-md-7">
        <div class="mb-4">
          <h5>Resumo do Pedido</h5>
          <ul class="list-unstyled">
            <li><strong>Produto:</strong> <span id="resumoNome"></span></li>
            <li><strong>Quantidade:</strong> <span id="resumoQuantidade"></span></li>
            <li><strong>Preço Total:</strong> <span id="resumoTotal"></span></li>
          </ul>
        </div>

        <form id="formPagamento">
          <h5>Dados de Pagamento</h5>

          <div class="mb-3">
            <label for="nome" class="form-label">Nome completo:</label>
            <input type="text" id="nome" name="nome" class="form-control" required pattern="[A-Za-zÀ-ÿ\s]+" title="Use apenas letras e espaços"
              oninvalid="this.setCustomValidity('Digite seu nome completo usando apenas letras.')"
              oninput="this.setCustomValidity('')">
          </div>

          <div class="mb-3">
            <label for="cartao" class="form-label">Número do cartão:</label>
            <input type="text" id="cartao" name="cartao" class="form-control" maxlength="19" inputmode="numeric" pattern="\d{13,19}" required
              oninvalid="this.setCustomValidity('Digite um número de cartão válido.')"
              oninput="this.setCustomValidity('')">
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="validade" class="form-label">Validade:</label>
              <input type="text" id="validade" name="validade" class="form-control" maxlength="5" placeholder="MM/AA" required
                oninvalid="this.setCustomValidity('Informe a validade no formato MM/AA.')"
                oninput="this.setCustomValidity('')">
            </div>
            <div class="col-md-6 mb-3">
              <label for="cvv" class="form-label">CVV:</label>
              <input type="text" id="cvv" name="cvv" class="form-control" maxlength="3" inputmode="numeric" pattern="\d{3}" required
                oninvalid="this.setCustomValidity('Informe o CVV com 3 dígitos.')"
                oninput="this.setCustomValidity('')">
            </div>
          </div>

          <div class="mb-3">
            <label for="cpf" class="form-label">CPF:</label>
            <input type="text" id="cpf" name="cpf" class="form-control" maxlength="11" inputmode="numeric" pattern="\d{11}" required
              oninvalid="this.setCustomValidity('Informe seu CPF com 11 números.')"
              oninput="this.setCustomValidity('')">
          </div>

          <button type="submit" class="btn btn-success w-100">Confirmar Pedido</button>
        </form>
      </div>
    </div>
  </main>

  <footer id="contato" class="bg-dark text-white text-center py-4 mt-5">
    <div class="container">
      <p>
        <img src="imgs/Address.png" alt="Ícone endereço" style="width: 20px; vertical-align: middle; margin-right: 8px;">
        Endereço: Av. Washington Luís, 105 - Vila Matias, Santos - SP
      </p>
      <p>
        <img src="imgs/Telephone.png" alt="Ícone telefone" style="width: 20px; vertical-align: middle; margin-right: 8px;">
        (13) 9212-4291
      </p>
      <p>
        <img src="imgs/Copyright.png" alt="Ícone copyright" width="17px" height="20px" style="vertical-align: middle; margin-right: 8px;">
        GameMania - 2025 - Todos os direitos reservados
      </p>
    </div>
  </footer>

  <script>
    const produto = JSON.parse(localStorage.getItem("produtoSelecionado"));
    if (produto) {
      document.getElementById("imagemProduto").src = produto.imagem;
      document.getElementById("imagemProduto").alt = produto.nome;
      document.getElementById("nomeProduto").textContent = produto.nome;
      document.getElementById("resumoNome").textContent = produto.nome;
      document.getElementById("resumoQuantidade").textContent = produto.quantidade;
      const total = produto.preco * produto.quantidade;
      document.getElementById("resumoTotal").textContent = "R$ " + total.toLocaleString('pt-BR', {minimumFractionDigits: 2});
    } else {
      window.location.href = "computadores.html";
    }
  </script>

  <script>
    document.getElementById("formPagamento").addEventListener("submit", function (e) {
      e.preventDefault();
      window.location.href = "confirmacao.html";
    });

    const validadeInput = document.getElementById("validade");
    validadeInput.addEventListener("input", function (e) {
      let valor = e.target.value.replace(/\D/g, "");
      if (valor.length > 4) valor = valor.slice(0, 4);
      if (valor.length > 2) {
        valor = valor.slice(0, 2) + "/" + valor.slice(2);
      }
      e.target.value = valor;
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
